{"is_source_file": true, "format": "TypeScript", "description": "This file defines type aliases, configuration constants, and functions for performing CRUD operations on 'Task' objects via a RESTful API in a frontend application. It includes API URL determination, request handling with error management, and specific functions for listing, creating, updating, and deleting tasks.", "external_files": ["fetch", "import.meta.env"], "external_methods": ["fetch"], "published": ["listTasks", "createTask", "updateTask", "deleteTask"], "classes": [], "methods": [{"name": "async function http<T>(path: string, init?: RequestInit): Promise<T> { http", "description": "Performs HTTP requests with JSON handling, timeouts, and enhanced error messages. It centralizes fetch logic for API interactions.", "scope": "", "scopeKind": ""}, {"name": "export async function listTasks(): Promise<Task[]> { listTasks", "description": "Fetches all tasks from the backend via GET request to /tasks.", "scope": "", "scopeKind": ""}, {"name": "export async function createTask(title: string): Promise<Task> { createTask", "description": "Creates a new task with a specified title via POST request to /tasks.", "scope": "", "scopeKind": ""}, {"name": "export async function updateTask( updateTask", "description": "Updates an existing task identified by id with partial data via PATCH request.", "scope": "", "scopeKind": ""}, {"name": "export async function deleteTask(id: string): Promise<{ success: true }> { deleteTask", "description": "Deletes a task by id via DELETE request to /tasks/:id.", "scope": "", "scopeKind": ""}], "calls": ["fetch", "clearTimeout", "setTimeout", "JSON.stringify", "http"], "search-terms": ["api.ts", "fetch wrapper", "Task type", "CRUD operations", "VITE_API_BASE", "VITE_DEV_PROXY_TARGET"], "state": 2, "file_id": 14, "knowledge_revision": 35, "git_revision": "", "revision_history": [{"29": ""}, {"35": ""}], "ctags": [{"_type": "tag", "name": "API_BASE", "path": "/home/kavia/workspace/code-generation/personal-to-do-list-manager-16876-16892/to_do_list_frontend/src/lib/api.ts", "pattern": "/^const API_BASE =$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "DEV_PROXY_TARGET", "path": "/home/kavia/workspace/code-generation/personal-to-do-list-manager-16876-16892/to_do_list_frontend/src/lib/api.ts", "pattern": "/^const DEV_PROXY_TARGET = (import.meta.env?.VITE_DEV_PROXY_TARGET as string | undefined)?.trim();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "DOMException", "path": "/home/kavia/workspace/code-generation/personal-to-do-list-manager-16876-16892/to_do_list_frontend/src/lib/api.ts", "pattern": "/^    const isAbort = err instanceof DOMException && err.name === \"AbortError\";$/", "language": "TypeScript", "kind": "constant", "scope": "http", "scopeKind": "function"}, {"_type": "tag", "name": "Task", "path": "/home/kavia/workspace/code-generation/personal-to-do-list-manager-16876-16892/to_do_list_frontend/src/lib/api.ts", "pattern": "/^export type Task = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "TypeError", "path": "/home/kavia/workspace/code-generation/personal-to-do-list-manager-16876-16892/to_do_list_frontend/src/lib/api.ts", "pattern": "/^    const isTypeErr = err instanceof TypeError; \\/\\/ often network error in fetch$/", "language": "TypeScript", "kind": "constant", "scope": "http", "scopeKind": "function"}, {"_type": "tag", "name": "baseHint", "path": "/home/kavia/workspace/code-generation/personal-to-do-list-manager-16876-16892/to_do_list_frontend/src/lib/api.ts", "pattern": "/^    const baseHint = API_BASE.startsWith(\"\\/api\")$/", "language": "TypeScript", "kind": "constant", "scope": "http", "scopeKind": "function"}, {"_type": "tag", "name": "contentType", "path": "/home/kavia/workspace/code-generation/personal-to-do-list-manager-16876-16892/to_do_list_frontend/src/lib/api.ts", "pattern": "/^    const contentType = res.headers.get(\"content-type\") || \"\";$/", "language": "TypeScript", "kind": "constant", "scope": "http", "scopeKind": "function"}, {"_type": "tag", "name": "controller", "path": "/home/kavia/workspace/code-generation/personal-to-do-list-manager-16876-16892/to_do_list_frontend/src/lib/api.ts", "pattern": "/^  const controller = new AbortController();$/", "language": "TypeScript", "kind": "constant", "scope": "http", "scopeKind": "function"}, {"_type": "tag", "name": "createTask", "path": "/home/kavia/workspace/code-generation/personal-to-do-list-manager-16876-16892/to_do_list_frontend/src/lib/api.ts", "pattern": "/^export async function createTask(title: string): Promise<Task> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "deleteTask", "path": "/home/kavia/workspace/code-generation/personal-to-do-list-manager-16876-16892/to_do_list_frontend/src/lib/api.ts", "pattern": "/^export async function deleteTask(id: string): Promise<{ success: true }> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "detail", "path": "/home/kavia/workspace/code-generation/personal-to-do-list-manager-16876-16892/to_do_list_frontend/src/lib/api.ts", "pattern": "/^    const detail = isAbort$/", "language": "TypeScript", "kind": "constant", "scope": "http", "scopeKind": "function"}, {"_type": "tag", "name": "hint", "path": "/home/kavia/workspace/code-generation/personal-to-do-list-manager-16876-16892/to_do_list_frontend/src/lib/api.ts", "pattern": "/^        const hint = DEV_PROXY_TARGET$/", "language": "TypeScript", "kind": "constant", "scope": "http", "scopeKind": "function"}, {"_type": "tag", "name": "http", "path": "/home/kavia/workspace/code-generation/personal-to-do-list-manager-16876-16892/to_do_list_frontend/src/lib/api.ts", "pattern": "/^async function http<T>(path: string, init?: RequestInit): Promise<T> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "instanceof", "path": "/home/kavia/workspace/code-generation/personal-to-do-list-manager-16876-16892/to_do_list_frontend/src/lib/api.ts", "pattern": "/^    const isAbort = err instanceof DOMException && err.name === \"AbortError\";$/", "language": "TypeScript", "kind": "constant", "scope": "http", "scopeKind": "function"}, {"_type": "tag", "name": "instanceof", "path": "/home/kavia/workspace/code-generation/personal-to-do-list-manager-16876-16892/to_do_list_frontend/src/lib/api.ts", "pattern": "/^    const isTypeErr = err instanceof TypeError; \\/\\/ often network error in fetch$/", "language": "TypeScript", "kind": "constant", "scope": "http", "scopeKind": "function"}, {"_type": "tag", "name": "isAbort", "path": "/home/kavia/workspace/code-generation/personal-to-do-list-manager-16876-16892/to_do_list_frontend/src/lib/api.ts", "pattern": "/^    const isAbort = err instanceof DOMException && err.name === \"AbortError\";$/", "language": "TypeScript", "kind": "constant", "scope": "http", "scopeKind": "function"}, {"_type": "tag", "name": "isTypeErr", "path": "/home/kavia/workspace/code-generation/personal-to-do-list-manager-16876-16892/to_do_list_frontend/src/lib/api.ts", "pattern": "/^    const isTypeErr = err instanceof TypeError; \\/\\/ often network error in fetch$/", "language": "TypeScript", "kind": "constant", "scope": "http", "scopeKind": "function"}, {"_type": "tag", "name": "listTasks", "path": "/home/kavia/workspace/code-generation/personal-to-do-list-manager-16876-16892/to_do_list_frontend/src/lib/api.ts", "pattern": "/^export async function listTasks(): Promise<Task[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/personal-to-do-list-manager-16876-16892/to_do_list_frontend/src/lib/api.ts", "pattern": "/^    const res = await fetch(url, {$/", "language": "TypeScript", "kind": "constant", "scope": "http", "scopeKind": "function"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/personal-to-do-list-manager-16876-16892/to_do_list_frontend/src/lib/api.ts", "pattern": "/^      const text = await res.text().catch(() => \"\");$/", "language": "TypeScript", "kind": "constant", "scope": "http", "scopeKind": "function"}, {"_type": "tag", "name": "timeout", "path": "/home/kavia/workspace/code-generation/personal-to-do-list-manager-16876-16892/to_do_list_frontend/src/lib/api.ts", "pattern": "/^  const timeout = setTimeout(() => controller.abort(), 15000);$/", "language": "TypeScript", "kind": "constant", "scope": "http", "scopeKind": "function"}, {"_type": "tag", "name": "updateTask", "path": "/home/kavia/workspace/code-generation/personal-to-do-list-manager-16876-16892/to_do_list_frontend/src/lib/api.ts", "pattern": "/^export async function updateTask($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/personal-to-do-list-manager-16876-16892/to_do_list_frontend/src/lib/api.ts", "pattern": "/^  const url = `${API_BASE}${path}`;$/", "language": "TypeScript", "kind": "constant", "scope": "http", "scopeKind": "function"}], "hash": "f9b74d5f2580c7009221603d0dd74c53", "format-version": 4, "code-base-name": "to_do_list_frontend", "filename": "to_do_list_frontend/src/lib/api.ts"}